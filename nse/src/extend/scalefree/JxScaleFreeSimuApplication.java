/**
 * 
 */
package extend.scalefree;
import java.util.*;
/**
 * @author Allen
 * 
 */
public class JxScaleFreeSimuApplication {
	 
	JxScaleFreeNodeCollection m_nodes;   
	
	JxScaleFreeEdgeCollection m_edges; 
	
	JxScaleFreeTrace m_trace; 
	
	Random random;
		
	String str;
	 
	int packet_num;
	//初始化
	public JxScaleFreeSimuApplication(){
		
		 m_trace = new JxScaleFreeTrace(); //保存结构
		    
   	     m_edges = new JxScaleFreeEdgeCollection(); //边集合(创建，保存)
   	     
   	     m_nodes = new JxScaleFreeNodeCollection(); //点集合(创建，保存)	
   	     
   		 random = new Random();
			
		 str = null;
	 
	}	
	
    public	void trace(int time) {
	
	    m_trace.Trace_Node( time ); //time为试验次数
	    
	    m_trace.Trace_Edge( time ); 
		
	}
    
    public void load(){   //数据库――内存
		
		m_trace.Load_Edgetopo(str);
		
		m_trace.Load_Nodetopo(str);
	}

	public void init(){  //初始化（产生拓扑结构）
	      
      m_trace.generate( 10 );   
	   
	  m_trace.Open_Database();    //打开数据库
		
	  m_trace.Save_NodeTopo(m_nodes.count());    //保存节点结构
		
	  m_trace.Save_EdgeTopo();    //保存边结构
	  		
	}
	
	public void exit(){
		
		m_trace.CloseDatabase();
		
	}

	public void run(int duration){  //运行
		
		for (int time=0; time<duration; time++){ 
		
		    m_trace.evolve();
			
			trace(time);  //保存实验结果		
		}	
	}
  
	public static void main(String[] args) {
		
		JxScaleFreeSimuApplication app=new JxScaleFreeSimuApplication();
		 
		app.init();
		
		app.run(10);
		
		System.out.println("success !");

	}
}

